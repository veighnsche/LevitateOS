; wlroots - Modular Wayland compositor library
; https://gitlab.freedesktop.org/wlroots/wlroots

(package "wlroots" "0.18.1"
  (description "Modular Wayland compositor library")
  (license "MIT")
  (homepage "https://gitlab.freedesktop.org/wlroots/wlroots")

  (deps
    (build "meson" "ninja" "pkg-config")
    (runtime "wayland" "wayland-protocols" "libxkbcommon" "libinput" "seatd"))

  (acquire
    (source "https://gitlab.freedesktop.org/wlroots/wlroots/-/releases/0.18.1/downloads/wlroots-0.18.1.tar.gz"))

  (build
    (extract "tar-gz")
    (run "cd wlroots-0.18.1 && meson setup build --prefix=$PREFIX -Dexamples=false -Dxwayland=disabled -Dbackends=drm,libinput -Drenderers=gles2")
    (run "cd wlroots-0.18.1 && ninja -C build -j$NPROC")
    (run "cd wlroots-0.18.1 && ninja -C build install"))

  (cleanup sources))

; foot - Fast, lightweight Wayland terminal
; https://codeberg.org/dnkl/foot

(package "foot" "1.18.1"
  (description "Fast, lightweight Wayland terminal emulator")
  (license "MIT")
  (homepage "https://codeberg.org/dnkl/foot")

  (deps
    (build "meson" "ninja" "pkg-config" "scdoc")
    (runtime
      "wayland"
      "wayland-protocols"
      "libxkbcommon"
      "fontconfig"
      "freetype"
      "pixman"
      "fcft"         ; font rendering library
      "utf8proc"))

  (acquire
    (source "https://codeberg.org/dnkl/foot/archive/1.18.1.tar.gz"
      (sha256 "TODO")))

  (build
    (configure "meson setup build --prefix=$PREFIX \
      -Ddocs=enabled \
      -Dthemes=true \
      -Dime=true \
      -Dgrapheme-clustering=enabled")
    (compile "ninja -C build -j$NPROC"))

  (install
    (shell "DESTDIR=$DESTDIR ninja -C build install"))

  (configure
    ; Default foot config
    (create-dir "$HOME/.config/foot" user))

  (cleanup sources))

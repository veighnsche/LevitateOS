; swaylock - Screen locker for Wayland
; https://github.com/swaywm/swaylock

(package "swaylock" "1.8.0"
  (description "Screen locker for Wayland compositors")
  (license "MIT")
  (homepage "https://github.com/swaywm/swaylock")

  (deps
    (build "meson" "ninja" "pkg-config")
    (runtime "wayland" "wayland-protocols" "libxkbcommon"))

  (acquire
    (source "https://github.com/swaywm/swaylock/releases/download/v1.8.0/swaylock-1.8.0.tar.gz"))

  (build
    (extract "tar-gz")
    (run "cd swaylock-1.8.0 && meson setup build --prefix=$PREFIX -Dpam=disabled -Dgdk-pixbuf=disabled -Dman-pages=disabled")
    (run "cd swaylock-1.8.0 && ninja -C build -j$NPROC")
    (run "cd swaylock-1.8.0 && ninja -C build install"))

  (cleanup sources))

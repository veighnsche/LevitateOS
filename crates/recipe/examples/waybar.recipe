; Waybar - Highly customizable Wayland bar
; https://github.com/Alexays/Waybar

(package "waybar" "0.11.0"
  (description "Highly customizable Wayland bar for Sway and wlroots")
  (license "MIT")
  (homepage "https://github.com/Alexays/Waybar")

  (deps
    (build "meson" "ninja" "pkg-config")
    (runtime "wayland" "wayland-protocols" "gtk-layer-shell"))

  (acquire
    (source "https://github.com/Alexays/Waybar/archive/refs/tags/0.11.0.tar.gz"))

  (build
    (extract "tar-gz")
    (run "cd Waybar-0.11.0 && meson setup build --prefix=$PREFIX -Dgtk-layer-shell=enabled -Drfkill=disabled -Dlogind=disabled -Dsndio=disabled -Dman-pages=disabled -Dtests=disabled")
    (run "cd Waybar-0.11.0 && ninja -C build -j$NPROC")
    (run "cd Waybar-0.11.0 && ninja -C build install"))

  (cleanup sources))
